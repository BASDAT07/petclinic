
{% extends 'base_fdo.html' %}

{% block title %}edit Kunjungan{% endblock %}

{% block extra_head %}
  <style>
    /* ───── Fix konflik Tailwind vs Bootstrap ───── */
    .navbar-collapse{ visibility:visible!important; }
    .dropdown-menu { visibility: visible !important; }
  </style>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto p-8 bg-white rounded-lg shadow">
    <h1 class="text-2xl font-semibold mb-6">Update Kunjungan ({{ id_kunjungan }})</h1>

    <form method="POST" class="space-y-6">
      {% csrf_token %}

      <!-- Dropdown ID Klien -->
      <div>
        <label for="id_klien" class="block mb-1 font-medium text-gray-700">ID Klien</label>
        <select id="id_klien" name="id_klien"
                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
          <option value="" disabled>Select ID Klien</option>
          {% for klien in klien_list %}
          <option value="{{ klien }}" {% if klien == current_klien %}selected{% endif %}>{{ klien }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Dropdown Nama Hewan -->
      <div>
        <label for="nama_hewan" class="block mb-1 font-medium text-gray-700">Nama Hewan</label>
        <select id="nama_hewan" name="nama_hewan"
                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
          <option value="" disabled>Select Nama Hewan</option>
          {% for hewan in hewan_list %}
          <option value="{{ hewan.0 }}" {% if hewan.1 == current_nama_hewan %}selected{% endif %}>{{ hewan.1 }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Dropdown Metode Kunjungan -->
      <div>
        <label for="metode_kunjungan" class="block mb-1 font-medium text-gray-700">Metode Kunjungan</label>
        <select id="metode_kunjungan" name="metode_kunjungan"
                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
          <option value="" disabled>Select Metode Kunjungan</option>
          {% for metode in tipe_kunjungan_list %}
          <option value="{{ metode.0 }}" {% if metode.0 == current_metode_kunjungan %}selected{% endif %}>{{ metode.0 }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Waktu Mulai Penanganan -->
      <div>
        <label for="waktu_mulai_penanganan" class="block mb-1 font-medium text-gray-700">Waktu Mulai Penanganan</label>
        <input type="datetime-local" id="waktu_mulai_penanganan" name="waktu_mulai_penanganan"
               value="{{ current_waktu_mulai|date:'Y-m-d\TH:i' }}"
               class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
      </div>

      <!-- Waktu Selesai Penanganan -->
      <div>
        <label for="waktu_selesai_penanganan" class="block mb-1 font-medium text-gray-700">Waktu Selesai Penanganan</label>
        <input type="datetime-local" id="waktu_selesai_penanganan" name="waktu_selesai_penanganan"
               value="{{ current_waktu_selesai|date:'Y-m-d\TH:i' }}"
               class="w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
      </div>

      <div class="flex justify-end space-x-4">
        <a href="{% url 'daftar_kunjungan' %}"
           class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Cancel</a>
        <button type="submit"
                class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Update</button>
      </div>
    </form>
  </div>

{% endblock content %}

